[importlinter]
root_packages =
    adapters
    adversarial
    api
    domain
    lob
    optimizers
    scripts
    services
    strategies
    utils
    wrappers
include_external_packages = true

[importlinter:layered_architecture]
name = Enforce layered architecture (core -> impl -> services -> strategies -> scripts)
type = layers
layers =
    scripts
    strategies
    services : api : service_calibrate_slippage
    adapters : adversarial : execution_providers : execution_providers_cme : execution_sim : impl_binance_public : impl_circuit_breaker : impl_cme_rollover : impl_cme_settlement : impl_fees : impl_futures_funding : impl_quantizer : impl_span_margin : lob : optimizers : wrappers
    core_config : core_constants : core_contracts : core_errors : core_futures : core_models : core_options : core_strategy : domain : utils
ignore_imports =
    scripts.* -> scripts.*
    strategies.* -> strategies.*
    services.* -> services.*
    adapters.* -> adapters.*
    adapters.binance_spot_private -> services.retry
    adapters.config -> services.secure_logging
    adapters.binance.futures_order_execution -> services.rest_budget
    wrappers.futures_env -> services.futures_feature_flags
