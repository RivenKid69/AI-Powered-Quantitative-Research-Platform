# –ü–û–õ–ù–´–ô –ú–ê–ü–ü–ò–ù–ì –í–°–ï–• 58 –ü–†–ò–ó–ù–ê–ö–û–í

–ê–≤—Ç–æ—Ä: –ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ TradingBot2
–î–∞—Ç–∞: 2025-11-10
–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-11-16 (–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–ª—è MACD)
–¶–µ–ª—å: –ü–æ–ª–Ω–∞—è –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –≤—Å–µ—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –º–æ–¥–µ–ª–∏

---

## –°–•–ï–ú–ê –ü–†–û–•–û–ñ–î–ï–ù–ò–Ø –î–ê–ù–ù–´–•

```
prepare_and_run.py ‚Üí DataFrame (24 —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–∞)
    ‚Üì
mediator.py:_extract_norm_cols() ‚Üí 21 –ø—Ä–∏–∑–Ω–∞–∫ –≤ norm_cols
mediator.py:_extract_technical_indicators() ‚Üí 11 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ indicators
    ‚Üì
obs_builder.pyx:build_observation_vector() ‚Üí 58 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ observation vector (–±—ã–ª–æ 56, +2)
    ‚Üì
PPO –º–æ–¥–µ–ª—å (observation_space.shape = (58,))
```

---

## –î–ï–¢–ê–õ–¨–ù–´–ô –ú–ê–ü–ü–ò–ù–ì –í–°–ï–• 58 –ü–†–ò–ó–ù–ê–ö–û–í

### **BAR LEVEL** (–∏–Ω–¥–µ–∫—Å—ã 0-2, –≤—Å–µ–≥–æ 3)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 0 | price | mediator: mark_price | –Ω–µ—Ç |
| 1 | log_volume_norm | mediator: tanh(log1p(quote_volume/1e6)) | –Ω–µ—Ç |
| 2 | rel_volume | mediator: tanh(log1p(volume/100)) | –Ω–µ—Ç |

---

### **INDICATORS** (–∏–Ω–¥–µ–∫—Å—ã 3-17, –≤—Å–µ–≥–æ 15)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 3 | ma5 | row["sma_1200"] (5 bars √ó 240min) | nan‚Üí0.0 |
| 4 | ma5_valid | 1.0 –µ—Å–ª–∏ ma5 –≤–∞–ª–∏–¥–µ–Ω | –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ ‚úÖ |
| 5 | ma20 | row["sma_5040"] (21 bars √ó 240min) | nan‚Üí0.0 |
| 6 | ma20_valid | 1.0 –µ—Å–ª–∏ ma20 –≤–∞–ª–∏–¥–µ–Ω | –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ ‚úÖ |
| 7 | rsi14 | row["rsi"] | default=50.0 |
| 8 | macd | sim.get_macd() | default=0.0 |
| **9** | **macd_valid** | **1.0 –µ—Å–ª–∏ macd –≤–∞–ª–∏–¥–µ–Ω** | **–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ ‚úÖ NEW** |
| 10 | macd_signal | sim.get_macd_signal() | default=0.0 |
| **11** | **macd_signal_valid** | **1.0 –µ—Å–ª–∏ macd_signal –≤–∞–ª–∏–¥–µ–Ω** | **–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ ‚úÖ NEW** |
| 12 | momentum | sim.get_momentum() | default=0.0 |
| 13 | atr | sim.get_atr() | default=0.0 |
| 14 | cci | sim.get_cci() | default=0.0 |
| 15 | obv | sim.get_obv() | default=0.0 |
| 16 | bb_position | sim.get_bb_lower/upper() | clip(-1,2) |
| 17 | bb_width_rel | sim.get_bb_lower/upper() | clip(0,10) |

‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–ª—è MACD (–∏–Ω–¥–µ–∫—Å—ã 9, 11)
‚ö†Ô∏è **NOTE**: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã 8-17 –∑–∞–≤–∏—Å—è—Ç –æ—Ç MarketSimulator

---

### **DERIVED** (–∏–Ω–¥–µ–∫—Å—ã 18-19, –≤—Å–µ–≥–æ 2)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 18 | ret_1h | obs_builder | tanh((price-prev)/prev) |
| 19 | vol_proxy | obs_builder | tanh(log1p(atr/price)) |

---

### **MICROSTRUCTURE** (–∏–Ω–¥–µ–∫—Å—ã 20-22, –≤—Å–µ–≥–æ 3)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 20 | ofi_proxy | obs_builder | mid_ret * vol_intensity |
| 21 | qimb | obs_builder | tanh(last_vol_imbalance) |
| 22 | micro_dev | obs_builder | 0.5*spread*qimb |

---

### **AGENT STATE** (–∏–Ω–¥–µ–∫—Å—ã 23-28, –≤—Å–µ–≥–æ 6)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 23 | cash_ratio | obs_builder | cash/total_worth, clip(0,1) |
| 24 | position_ratio | obs_builder | tanh(pos_value/total) |
| 25 | vol_imbalance | state.last_vol_imbalance | tanh |
| 26 | trade_intensity | state.last_trade_intensity | tanh |
| 27 | realized_spread | state.last_realized_spread | clip(-0.1,0.1) |
| 28 | agent_fill_ratio | state.last_agent_fill_ratio | –Ω–µ—Ç |

---

### **METADATA** (–∏–Ω–¥–µ–∫—Å—ã 29-33, –≤—Å–µ–≥–æ 5)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 29 | is_high_importance | row["is_high_importance"] | –±–∏–Ω–∞—Ä–Ω—ã–π |
| 30 | time_since_event | row["time_since_event"] | tanh(x/24) |
| 31 | risk_off_flag | fear_greed < 25 | –±–∏–Ω–∞—Ä–Ω—ã–π |
| 32 | fear_greed_value | row["fear_greed_value"] | /100, clip(-3,3) |
| 33 | fear_greed_indicator | has_fear_greed | –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ |

---

### **EXTERNAL (norm_cols)** (–∏–Ω–¥–µ–∫—Å—ã 34-54, –≤—Å–µ–≥–æ 21)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ DataFrame | –û–∫–Ω–æ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|-------------------|------|----------|-----------|
| 34 | cvd_24h | 1440m | transformers.py | tanh, clip(-3,3) |
| 35 | cvd_168h | 10080m | transformers.py | tanh, clip(-3,3) |
| 36 | yang_zhang_24h | 1440m | transformers.py | tanh, clip(-3,3) |
| 37 | yang_zhang_168h | 10080m | transformers.py | tanh, clip(-3,3) |
| 38 | garch_12h | 720m | transformers.py | tanh, clip(-3,3) |
| 39 | garch_24h | 1440m | transformers.py | tanh, clip(-3,3) |
| 40 | ret_15m | 15m | transformers.py | tanh, clip(-3,3) |
| 41 | ret_60m | 60m | transformers.py | tanh, clip(-3,3) |
| 42 | ret_5m | 5m | transformers.py | tanh, clip(-3,3) |
| 43 | sma_60 | 60m | transformers.py | tanh, clip(-3,3) |
| 44 | yang_zhang_720h | 43200m | transformers.py | tanh, clip(-3,3) |
| 45 | parkinson_24h | 1440m | transformers.py | tanh, clip(-3,3) |
| 46 | parkinson_168h | 10080m | transformers.py | tanh, clip(-3,3) |
| 47 | garch_500m | 500m | transformers.py | tanh, clip(-3,3) |
| 48 | taker_buy_ratio | —Ç–µ–∫—É—â–∏–π | transformers.py | tanh, clip(-3,3) |
| 49 | taker_buy_ratio_sma_24h | 1440m | transformers.py | tanh, clip(-3,3) |
| 50 | taker_buy_ratio_sma_6h | 360m | transformers.py | tanh, clip(-3,3) |
| 51 | taker_buy_ratio_sma_12h | 720m | transformers.py | tanh, clip(-3,3) |
| 52 | taker_buy_ratio_momentum_1h | 60m | transformers.py | tanh, clip(-3,3) |
| 53 | taker_buy_ratio_momentum_6h | 360m | transformers.py | tanh, clip(-3,3) |
| 54 | taker_buy_ratio_momentum_12h | 720m | transformers.py | tanh, clip(-3,3) |

---

### **TOKEN METADATA** (–∏–Ω–¥–µ–∫—Å—ã 55-56, –≤—Å–µ–≥–æ 2)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 55 | num_tokens_norm | state.token_index | num/max, clip(0,1) |
| 56 | token_id_norm | state.token_index | id/max, clip(0,1) |

---

### **TOKEN ONE-HOT** (–∏–Ω–¥–µ–∫—Å 57, –≤—Å–µ–≥–æ 1)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|----------|----------|-----------|
| 57 | token[0] | state.token_index | one-hot encoding |

---

## CHANGELOG: 56 ‚Üí 58 FEATURES

### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ (2025-11-16):

**–ù–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏**:
- –ò–Ω–¥–µ–∫—Å 9: `macd_valid` - —Ñ–ª–∞–≥ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ MACD (1.0 = –≤–∞–ª–∏–¥–µ–Ω, 0.0 = fallback –∫ 0.0)
- –ò–Ω–¥–µ–∫—Å 11: `macd_signal_valid` - —Ñ–ª–∞–≥ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ MACD Signal (1.0 = –≤–∞–ª–∏–¥–µ–Ω, 0.0 = fallback –∫ 0.0)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å ma5_valid/ma20_valid (–∏–Ω–¥–µ–∫—Å—ã 4, 6)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É –æ—Ç–ª–∏—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π MACD=0 –æ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—É—á–µ–Ω–∏—è (–Ω–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç fallback –∑–Ω–∞—á–µ–Ω–∏–π)

**–°–º–µ—â–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤**:
- –í—Å–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞ 8 —Å–¥–≤–∏–Ω—É—Ç—ã –Ω–∞ +2
- –ù–∞–ø—Ä–∏–º–µ—Ä: momentum –±—ã–ª –∏–Ω–¥–µ–∫—Å 10, —Å—Ç–∞–ª –∏–Ω–¥–µ–∫—Å 12
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ N_FEATURES = _compute_n_features()

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ**:
- `obs_builder.pyx:256-267`: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ macd_valid, macd_signal_valid
- `mediator.py:1118-1124`: –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fallback —Å–ª—É—á–∞–µ–≤
- `lob_state_cython.pyx:85`: N_FEATURES –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ = 58

**Backwards compatibility**: ‚ö†Ô∏è **BREAKING CHANGE**
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (observation space –∏–∑–º–µ–Ω–µ–Ω)
- –°—Ç–∞—Ä—ã–µ —á–µ–∫–ø–æ–∏–Ω—Ç—ã –ù–ï —Å–æ–≤–º–µ—Å—Ç–∏–º—ã (56 ‚Üí 58 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤)

---

## –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- **–í—Å–µ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ observation**: 58 (–±—ã–ª–æ 56, +2)
- **–°–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**: 24
- **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–∑ DataFrame**: 24 (21 norm_cols + 3 indicators)
- **–ü–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**: 0
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: 100% (24/24)
- **–§–ª–∞–≥–æ–≤ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏**: 4 (ma5_valid, ma20_valid, macd_valid, macd_signal_valid)

---

## –ü–†–û–ë–õ–ï–ú–´ –ò –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

1. ~~**–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö**: 5 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è~~ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û** (2025-11-11)
   - –†–∞—Å—à–∏—Ä–µ–Ω norm_cols —Å 16 –¥–æ 21 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
   - –í—Å–µ taker_buy_ratio –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

2. ~~**–î–≤–æ–π–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**: norm_cols –ø—Ä–æ—Ö–æ–¥—è—Ç tanh –¥–≤–∞–∂–¥—ã~~ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û** (2025-11-11)
   - –£–±—Ä–∞–Ω tanh –∏–∑ mediator.py:_extract_norm_cols
   - –î–æ–±–∞–≤–ª–µ–Ω tanh –≤ obs_builder.pyx

3. ~~**–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–ª–∞–≥–æ–≤ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–ª—è MACD**~~ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û** (2025-11-16)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã macd_valid (–∏–Ω–¥–µ–∫—Å 9), macd_signal_valid (–∏–Ω–¥–µ–∫—Å 11)
   - –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å ma5/ma20

4. ~~**–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è fallback**~~ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û** (2025-11-16)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ mediator.py:1118-1124

### ‚ö†Ô∏è –û–°–¢–ê–í–®–ò–ï–°–Ø –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç MarketSimulator**: 8 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≤–∏—Å—è—Ç –æ—Ç sim –æ–±—ä–µ–∫—Ç–∞
   - –§–∞–π–ª: mediator.py:1078-1133
   - –ü—Ä–æ–±–ª–µ–º–∞: –ï—Å–ª–∏ sim=None, –≤—Å–µ —ç—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ = 0.0
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: macd, macd_signal, momentum, atr, cci, obv, bb_lower, bb_upper
   - –°—Ç–∞—Ç—É—Å: –ò–ó–í–ï–°–¢–ù–ê–Ø –û–°–û–ë–ï–ù–ù–û–°–¢–¨ (–Ω–µ –±–∞–≥)

2. **NaN –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –†–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NaN –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
   - ma5‚Üí0.0, rsi‚Üí50.0, macd‚Üí0.0
   - –°—Ç–∞—Ç—É—Å: –ù–∞–º–µ—Ä–µ–Ω–Ω–æ (—Ä–∞–∑–Ω—ã–µ defaults –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)

---

## –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ:
1. ~~–î–æ–±–∞–≤–∏—Ç—å 5 –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ observation~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
2. ~~–£–±—Ä–∞—Ç—å –¥–≤–æ–π–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ tanh~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
3. ~~–†–∞—Å—à–∏—Ä–∏—Ç—å norm_cols —Å 16 –¥–æ 21~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
4. ~~–û–±–Ω–æ–≤–∏—Ç—å EXT_NORM_DIM –∏ N_FEATURES~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
5. ~~–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
6. ~~–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-11)
7. ~~–î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–ª—è MACD~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-16)
8. ~~–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fallback —Å–ª—É—á–∞–µ–≤~~ ‚Üí **–í–´–ü–û–õ–ù–ï–ù–û** (2025-11-16)

### üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ:

#### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å —Å –Ω–æ–≤—ã–º observation space (58 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤)
2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å 58 –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏
3. –ü—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (momentum, atr, cci, obv) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É NaN –∑–Ω–∞—á–µ–Ω–∏–π (—Å–µ–π—á–∞—Å ma5‚Üí0.0, rsi‚Üí50.0)
5. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç MarketSimulator –¥–ª—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
6. –î–æ–±–∞–≤–∏—Ç—å feature importance logging

#### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
7. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –±—É–¥—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é)
8. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ transformers.py –≤–º–µ—Å—Ç–æ MarketSimulator

---

## –°–°–´–õ–ö–ò –ù–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ

- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç MACD: `MACD_VALIDATION_AUDIT.md`
- –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è: `FEATURE_MAPPING_56.md`
- –¢–µ—Å—Ç—ã: `tests/test_full_feature_pipeline_56.py` (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ 58)
- Verification script: `verify_56_features.py` (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ 58)
